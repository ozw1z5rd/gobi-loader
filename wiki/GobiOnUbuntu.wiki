#ubuntu 11.04

= Ubuntu 11.04 miss the support for my notebook =

I installed ubuntu 11.04 and nothing is working. 
The modem is not detected at all!

As first step add the following two rows into the /etc/modules files:
{{{
hp-wmi 
qcserial 
}}}
This is still not enough because the vendorID / deviceID used in my notebook are missing into the qcserial.ko driver.

I mean these numbers:
{{{
 oz@ubuntu:/usr/src/linux-source-2.6.38/linux-source-2.6.38/drivers/usb/serial$ lsusb 
 :
 .
 Bus 003 Device 002: ID 03f0:171d Hewlett-Packard Wireless (Bluetooth + WLAN)  Interface [Integrated Module]  
 -----------------------^^^^^^^^^
 :
 .
}}}

Let's add them and recompile qcserial.c: 
{{{
 apt-get install linux-source-2.6.38 
 cd /usr/src/linux-source-2.6.38 
 bunzip2 linux-source-2.6.38.tar.bz2
 tar xvf  linux-source-2.6.38.tar
 cd  linux-source-2.6.38/drivers/usb/serial
 vi qcserial.c 
}}}
Add this row :
{{{
       {USB_DEVICE(0x03f0, 0x171d)},   /* HP Gobi 2000 Modem device OZ  */ 

}}}
Open the MakeFile inside the same folder and add in top:
{{{
 obj-m = qcserial.o  
 KVERSION = $(shell uname -r) 
 all: 
 <press tab>make -C /lib/modules/$(KVERSION)/build M=$(PWD) modules 
 clean: 
 <press tab>make -C /lib/modules/$(KVERSION)/build M=$(PWD) clean 
}}}
Now
{{{
 make
}}}
after the compilation completes copy qcserial.ko in 
/lib/modules/2.6.38-8-generic/kernel/drivers/usb/serial/

After the reboot you will see the modem is detected and the ttyUSB0 and ttyUSB1 are made available:
{{{
[   27.908170] usbserial: USB Serial Driver core
[   27.912460] USB Serial support registered for Qualcomm USB modem
[   27.914390] qcserial 3-1:1.2: Qualcomm USB modem converter detected
[   27.914560] usb 3-1: Qualcomm USB modem converter now attached to ttyUSB0
[   27.915407] qcserial 3-1:1.3: Qualcomm USB modem converter detected
[   27.915550] usb 3-1: Qualcomm USB modem converter now attached to ttyUSB1
[   27.915598] usbcore: registered new interface driver qcserial
}}}

Of course loader won't work :-) but I'm working on this.
